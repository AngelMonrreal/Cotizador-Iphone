<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Compra y venta de electrónica</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ICONO PARA AGREGAR A INICIO -->
<link rel="apple-touch-icon" sizes="180x180" href="logoinicio.jpeg">
<link rel="icon" type="image/jpeg" sizes="32x32" href="logoinicio.jpeg">
<link rel="icon" type="image/jpeg" sizes="16x16" href="logoinicio.jpeg">

<style>
*{box-sizing:border-box}

body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  background:#ffffff;
  color:#0f172a;
  padding:20px;
  display:flex;
  justify-content:center;
}

.app{
  width:100%;
  max-width:420px;
}

select,input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:12px;
  border:1px solid #cbd5e1;
  font-size:15px;
  background:#ffffff;
}

button{
  background:#0f172a;
  color:white;
  cursor:pointer;
}

button.eliminar{
  background:#dc2626;
}

.tabs{
  display:flex;
  gap:10px;
  margin-top:14px;
}

.panel{
  border:1px solid #e2e8f0;
  border-radius:16px;
  padding:18px;
  margin-top:14px;
}

.hidden{display:none}

.label{
  text-align:center;
  font-size:14px;
  color:#475569;
}

.precio{
  text-align:center;
  font-size:34px;
  font-weight:700;
  margin-top:6px;
}

.row{
  display:flex;
  justify-content:space-between;
  margin-top:12px;
}

.ganancia{
  color:#16a34a;
  font-weight:600;
  border-top:1px solid #e2e8f0;
  padding-top:12px;
  margin-top:14px;
}

hr{
  border:none;
  border-top:1px solid #e2e8f0;
  margin:16px 0;
}

.small{
  text-align:center;
  font-size:12px;
  color:#64748b;
  margin-bottom:2px;
  font-weight:600;
}
</style>
</head>

<body>
<div class="app">

<!-- TEXTO ARRIBA + LOGO -->
<div style="text-align:center;margin-bottom:8px">
  <div class="small">Compra y venta de electrónica</div>
  <img src="logomonmex.png.jpeg" alt="Logo" style="width:180px;height:auto;border-radius:20px">
</div>

<select id="modelo" onchange="calcular()"></select>

<select id="gb" onchange="calcular()">
  <option value="">Capacidad</option>
  <option value="64">64 GB</option>
  <option value="128">128 GB</option>
  <option value="256">256 GB</option>
  <option value="512">512 GB</option>
  <option value="1024">1 TB</option>
  <option value="2048">2 TB</option>
</select>

<div class="tabs">
  <button onclick="mostrarCliente()">Cliente</button>
  <button onclick="pedirPin()">Administrador</button>
</div>

<!-- CLIENTE -->
<div class="panel" id="clientePanel">
  <div class="label">Te lo puedo comprar en</div>
  <div class="precio" id="precioCompraCliente">—</div>
</div>

<!-- LOGIN ADMIN -->
<div class="panel hidden" id="loginPanel">
  <div class="label">PIN Administrador</div>
  <input type="password" id="pinInput" placeholder="PIN">
  <button onclick="validarPin()">Entrar</button>
</div>

<!-- ADMIN -->
<div class="panel hidden" id="adminPanel">
  <div class="row">
    <span>Máximo a pagar</span>
    <span id="precioCompraAdmin">—</span>
  </div>

  <div class="row">
    <span>Precio venta</span>
    <span id="precioVentaAdmin">—</span>
  </div>

  <div class="row ganancia">
    <span>Ganancia</span>
    <span id="ganancia">—</span>
  </div>

  <hr>

  <div class="label">Agregar / Editar modelo</div>
  <input id="newModelo" placeholder="Modelo (i13, i13p, i13pm)">
  <input id="newGB" placeholder="GB (64,128,256,512,1024,2048)">
  <input id="newCompra" placeholder="Precio compra">
  <input id="newVenta" placeholder="Precio venta">
  <button onclick="guardarModelo()">Guardar / Actualizar</button>

  <button class="eliminar" onclick="eliminarModelo()">Eliminar modelo seleccionado</button>

  <div class="small">i13 = normal · i13p = Pro · i13pm = Pro Max</div>
</div>

</div>

<script>
const PIN="2303";

let precios=JSON.parse(localStorage.getItem("precios"))||{
  "i11-64":[4200,5200],
  "i11-128":[4700,5800],
  "i11-256":[5200,6500],
  "i13-128":[8500,9800],
  "i13p-256":[12500,14500],
  "i13pm-256":[13500,15800]
};

function nombreBonito(m){
  return m.replace("pm"," Pro Max").replace("p"," Pro").replace("i","");
}

function cargarModelos(){
  modelo.innerHTML='<option value="">Modelo</option>';
  [...new Set(Object.keys(precios).map(k=>k.split("-")[0]))]
    .forEach(m=>{
      let o=document.createElement("option");
      o.value=m;
      o.textContent="iPhone "+nombreBonito(m);
      modelo.appendChild(o);
    });
}

function calcular(){
  let key=modelo.value+"-"+gb.value;
  if(precios[key]){
    let [c,v]=precios[key];
    precioCompraCliente.textContent="$"+c;
    precioCompraAdmin.textContent="$"+c;
    precioVentaAdmin.textContent="$"+v;
    ganancia.textContent="$"+(v-c);
  }else{
    precioCompraCliente.textContent="—";
    precioCompraAdmin.textContent="—";
    precioVentaAdmin.textContent="—";
    ganancia.textContent="—";
  }
}

function mostrarCliente(){
  clientePanel.classList.remove("hidden");
  adminPanel.classList.add("hidden");
  loginPanel.classList.add("hidden");
}

function pedirPin(){
  clientePanel.classList.add("hidden");
  loginPanel.classList.remove("hidden");
}

function validarPin(){
  if(pinInput.value===PIN){
    loginPanel.classList.add("hidden");
    adminPanel.classList.remove("hidden");
    pinInput.value="";
  }else alert("PIN incorrecto");
}

function guardarModelo(){
  let m=newModelo.value.trim();
  let g=newGB.value.trim();
  let c=parseInt(newCompra.value);
  let v=parseInt(newVenta.value);

  if(!m||!g||!c||!v){alert("Completa todos los campos");return;}

  precios[m+"-"+g]=[c,v];
  localStorage.setItem("precios",JSON.stringify(precios));
  cargarModelos();
  modelo.value=m;gb.value=g;calcular();
  newModelo.value=newGB.value=newCompra.value=newVenta.value="";
}

function eliminarModelo(){
  if(!modelo.value||!gb.value){alert("Selecciona modelo y capacidad");return;}
  let key=modelo.value+"-"+gb.value;
  if(confirm("¿Eliminar este modelo?")){
    delete precios[key];
    localStorage.setItem("precios",JSON.stringify(precios));
    gb.value="";cargarModelos();calcular();
  }
}

cargarModelos();
</script>

</body>
</html>
